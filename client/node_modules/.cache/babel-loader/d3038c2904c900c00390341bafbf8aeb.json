{"ast":null,"code":"import _classCallCheck from\"/javatest/hrd/intelliJ_projects/section4/cloudSetting/be-sprint-deployment/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/javatest/hrd/intelliJ_projects/section4/cloudSetting/be-sprint-deployment/client/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/javatest/hrd/intelliJ_projects/section4/cloudSetting/be-sprint-deployment/client/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/javatest/hrd/intelliJ_projects/section4/cloudSetting/be-sprint-deployment/client/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/javatest/hrd/intelliJ_projects/section4/cloudSetting/be-sprint-deployment/client/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{Switch,Route,Redirect,withRouter}from'react-router-dom';import axios from'axios';import Login from'./components/Login';import Main from'./components/Main';import'./App.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=/*#__PURE__*/function(_Component){_inherits(App,_Component);var _super=_createSuper(App);function App(props){var _this;_classCallCheck(this,App);_this=_super.call(this,props);_this.state={isLogin:false,status:''};_this.handleStatus=_this.handleStatus.bind(_assertThisInitialized(_this));_this.changeLoginStatus=_this.changeLoginStatus.bind(_assertThisInitialized(_this));return _this;}_createClass(App,[{key:\"componentDidMount\",value:function componentDidMount(){this.handleStatus();}},{key:\"handleStatus\",value:function handleStatus(){var _this2=this;axios.get(\"\".concat(process.env.REACT_APP_API_URL,\"/status\"),{withCredentials:true,headers:{'Authorization':\"Bearer \".concat(localStorage.getItem('accessToken'))}}).then(function(res){var _res$data=res.data,login=_res$data.login,connectedToDatabase=_res$data.connectedToDatabase;_this2.setState({isLogin:login,status:connectedToDatabase},function(){_this2.props.history.push('/');});}).catch(function(err){return console.log(err);});}},{key:\"changeLoginStatus\",value:function changeLoginStatus(){var _this3=this;this.setState({isLogin:false,status:''},function(){_this3.props.history.push('/');});}},{key:\"render\",value:function render(){var _this4=this;var _this$state=this.state,isLogin=_this$state.isLogin,status=_this$state.status;return/*#__PURE__*/_jsx(\"div\",{className:\"app\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[isLogin?/*#__PURE__*/_jsx(\"div\",{className:\"success\",children:\"\\uB85C\\uADF8\\uC778\\uC5D0 \\uC131\\uACF5\\uD588\\uC2B5\\uB2C8\\uB2E4\"}):/*#__PURE__*/_jsx(\"div\",{className:\"status\",children:\"\\uC774\\uB984\\uC5D0\\uB294 \\uAE40\\uCF54\\uB529,\\uBE44\\uBC00\\uBC88\\uD638\\uC5D0\\uB294 1234\\uB9CC \\uC785\\uB825 \\uAC00\\uB2A5\\uD569\\uB2C8\\uB2E4\"}),isLogin?status?/*#__PURE__*/_jsx(\"div\",{className:\"success\",children:\"\\uB370\\uC774\\uD130\\uBCA0\\uC774\\uC2A4 \\uC5F0\\uACB0\\uC5D0 \\uC131\\uACF5\\uD588\\uC2B5\\uB2C8\\uB2E4\"}):/*#__PURE__*/_jsx(\"div\",{className:\"fail\",children:\"\\uD558\\uC9C0\\uB9CC, \\uB370\\uC774\\uD130\\uBCA0\\uC774\\uC2A4 \\uC5F0\\uACB0\\uC774 \\uD544\\uC694\\uD569\\uB2C8\\uB2E4\"}):'',/*#__PURE__*/_jsxs(Switch,{children:[/*#__PURE__*/_jsx(Route,{exact:true,path:\"/main\",render:function render(){return/*#__PURE__*/_jsx(Main,{changeLoginStatus:_this4.changeLoginStatus});}}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/login\",render:function render(){return/*#__PURE__*/_jsx(Login,{handleStatus:_this4.handleStatus});}}),/*#__PURE__*/_jsx(Route,{path:\"/\",render:function render(){if(isLogin){return/*#__PURE__*/_jsx(Redirect,{to:\"/main\"});}return/*#__PURE__*/_jsx(Redirect,{to:\"/login\"});}})]})]})});}}]);return App;}(Component);export default withRouter(App);","map":{"version":3,"sources":["/javatest/hrd/intelliJ_projects/section4/cloudSetting/be-sprint-deployment/client/src/App.js"],"names":["React","Component","Switch","Route","Redirect","withRouter","axios","Login","Main","App","props","state","isLogin","status","handleStatus","bind","changeLoginStatus","get","process","env","REACT_APP_API_URL","withCredentials","headers","localStorage","getItem","then","res","data","login","connectedToDatabase","setState","history","push","catch","err","console","log"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Switch, Route, Redirect, withRouter } from 'react-router-dom';\nimport axios from 'axios';\n\nimport Login from './components/Login';\nimport Main from './components/Main';\nimport './App.css';\n\nclass App extends Component {\n  state = {\n    isLogin: false,\n    status: ''\n  }\n\n  constructor(props) {\n    super(props);\n    this.handleStatus = this.handleStatus.bind(this);\n    this.changeLoginStatus = this.changeLoginStatus.bind(this);\n  }\n\n  componentDidMount() {\n    this.handleStatus();\n  }\n\n  handleStatus() {\n    axios\n      .get(`${process.env.REACT_APP_API_URL}/status`,\n        {\n          withCredentials: true,\n          headers: {\n            'Authorization': `Bearer ${localStorage.getItem('accessToken')}`\n          }\n        })\n      .then(res => {\n        const { login, connectedToDatabase } = res.data;\n        this.setState({\n          isLogin: login,\n          status: connectedToDatabase\n        }, () => {\n          this.props.history.push('/');\n        });\n      })\n      .catch(err => console.log(err));\n  }\n\n  changeLoginStatus() {\n    this.setState({\n      isLogin: false,\n      status: ''\n    }, () => {\n      this.props.history.push('/');\n    });\n  }\n\n  render() {\n    const { isLogin, status } = this.state;\n\n    return (\n      <div className=\"app\">\n        <div className=\"container\">\n          {isLogin\n            ? <div className=\"success\">로그인에 성공했습니다</div>\n            : <div className=\"status\">이름에는 김코딩,비밀번호에는 1234만 입력 가능합니다</div>\n          }\n          {isLogin\n            ? (status\n              ? (<div className=\"success\">데이터베이스 연결에 성공했습니다</div>)\n              : (<div className=\"fail\">하지만, 데이터베이스 연결이 필요합니다</div>))\n            : ''\n          }\n          <Switch>\n            <Route\n              exact\n              path='/main'\n              render={() => <Main changeLoginStatus={this.changeLoginStatus} />} />\n            <Route\n              exact\n              path='/login'\n              render={() => <Login handleStatus={this.handleStatus} />} />\n            <Route\n              path='/'\n              render={() => {\n                if (isLogin) {\n                  return <Redirect to='/main' />;\n                }\n                return <Redirect to='/login' />;\n              }}\n            />\n          </Switch>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default withRouter(App);\n"]},"metadata":{},"sourceType":"module"}